"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[48825],{48825:function(e,t,r){r.d(t,{fy:function(){return ed}});var n,o,i,s=r(11492),a=r(60765),u=r(44239),c=r(9194),f=r(89920),d=r(5892),l=r(35349),g=r(46125),p=r(19708),v=r(7239),h=r(27310),b=r(70001),y=r(59543),x=r(72144),C=r(75850),k=r(88883),m=r(51143),w=function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},L={debug:"debug",error:"error",info:"info",warn:"warn"},T={console:"console",http:"http"},E=Object.keys(L),_=function(){function e(e,t,r,n,o,i){void 0===n&&(n=T.http),void 0===o&&(o=L.debug),void 0===i&&(i={}),this.handleLogStrategy=e,this.handlerType=n,this.level=o,this.contextManager=(0,c.W)(t),this.contextManager.setContext(i),r&&this.contextManager.setContextProperty("logger",{name:r})}return e.prototype.log=function(e,t,r,n){if(void 0===r&&(r=L.info),null!=n){var o,i=n instanceof Error?(0,x._)(n):void 0,s=(0,C.AP)({stackTrace:i,originalError:n,nonErrorPrefix:"Provided",source:k.z.LOGGER,handling:"handled",startClocks:(0,m.$I)()});o={stack:s.stack,kind:s.type,message:s.message,causes:s.causes}}var a=(0,p.N)(t),u=o?(0,v.$e)({error:o},a):a;this.handleLogStrategy({message:(0,p.N)(e),context:u,status:r},this)},e.prototype.debug=function(e,t,r){this.log(e,t,L.debug,r)},e.prototype.info=function(e,t,r){this.log(e,t,L.info,r)},e.prototype.warn=function(e,t,r){this.log(e,t,L.warn,r)},e.prototype.error=function(e,t,r){this.log(e,t,L.error,r)},e.prototype.setContext=function(e){this.contextManager.setContext(e)},e.prototype.getContext=function(){return this.contextManager.getContext()},e.prototype.setContextProperty=function(e,t){this.contextManager.setContextProperty(e,t)},e.prototype.removeContextProperty=function(e){this.contextManager.removeContextProperty(e)},e.prototype.clearContext=function(){this.contextManager.clearContext()},e.prototype.setHandler=function(e){this.handlerType=e},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(e){this.level=e},e.prototype.getLevel=function(){return this.level},w([l.Th],e.prototype,"log",null),e}(),z=r(37566),P=r(9952),R=r(74475),S=r(94852),A=r(21061),G=r(83783),O=r(91290),I=r(9342),D=32*A.Hi;function U(e,t,r){if(void 0===e)return[];if(!("all"===e||Array.isArray(e)&&e.every(function(e){return(0,b.q9)(t,e)}))){P.jf.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return"all"===e?t:(0,I.R)(e)}var M="logs",j=r(68292),N=r(89375),q=r(41795),H=r(86952),W=r(87148),$=r(54202);function B(e){return(0,$.y7)(e.sessionSampleRate)?"1":"0"}var F=r(88664),Z=r(83772),J=!1;function V(e){var t=window;if((0,q.Y9)()){var r=n(t.DD_RUM_SYNTHETICS);return r||J||(J=!0,(0,g.eJ)("Logs sent before RUM is injected by the synthetics worker",{testId:(0,q.L7)(),resultId:(0,q.QB)()})),r}return n(t.DD_RUM);function n(t){if(t&&t.getInternalContext)return t.getInternalContext(e)}}var Y=r(2122),K=((n={})[P.vA.log]=L.info,n[P.vA.debug]=L.debug,n[P.vA.info]=L.info,n[P.vA.warn]=L.warn,n[P.vA.error]=L.error,n),Q=((o={})[O._.cspViolation]=L.error,o[O._.intervention]=L.error,o[O._.deprecation]=L.warn,o),X=r(90661),ee=r(24799),et=r(11250),er=r(62439),en=r(14517);function eo(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}var ei=r(65744),es=r(84573).l,ea=((i={})[L.debug]=0,i[L.info]=1,i[L.warn]=2,i[L.error]=3,i);function eu(e,t,r){var n=r.getHandler(),o=Array.isArray(n)?n:[n];return ea[e]>=ea[r.getLevel()]&&(0,b.q9)(o,t)}var ec=r(51590),ef=r(48755),ed=function(e){var t=(0,u.iv)(),r=(0,c.W)(t.getOrCreateTracker(2)),n=(0,c.W)(t.getOrCreateTracker(1)),o=(0,f.H)();function i(){return{view:{referrer:document.referrer,url:window.location.href},context:r.getContext(),user:n.getContext()}}var a=function(e,t,r){var n,o,i=new z.S,s=t.observable.subscribe(a);function a(){if(o&&n&&t.isGranted()){s.unsubscribe();var e=r(n,o);i.drain(e)}}return{init:function(e){if(!e){P.jf.error("Missing configuration");return}if((0,R.xT)()&&(r=e,e=(0,b.f0)({},r,{clientToken:"empty"})),n=e,o){(0,y.W)("DD_LOGS",e);return}var r,i=function(e){!0===e.usePciIntake&&e.site&&"datadoghq.com"!==e.site&&P.jf.warn("PCI compliance for Logs is only available for Datadog organizations in the US1 site. Default intake will be used.");var t=(0,G.fP)(e),r=U(e.forwardConsoleLogs,(0,b.TT)(P.vA),"Forward Console Logs"),n=U(e.forwardReports,(0,b.TT)(O._),"Forward Reports");if(t&&r&&n)return e.forwardErrorsToLogs&&!(0,b.q9)(r,P.vA.error)&&r.push(P.vA.error),(0,b.f0)({forwardErrorsToLogs:!1!==e.forwardErrorsToLogs,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:D},t)}(e);i&&(o=i,t.tryToInit(i.trackingConsent),a())},get initConfiguration(){return n},getInternalContext:S.Z,handleLog:function(t,r,n,o){void 0===n&&(n=e()),void 0===o&&(o=(0,m.n$)()),i.add(function(e){return e.handleLog(t,r,n,o)})}}}(i,o,function(t,s){t.storeContextsAcrossPages&&((0,d.ue)(s,r,M,2),(0,d.ue)(s,n,M,1));var u=e(t,s,i,o);return a=(0,b.f0)({init:function(e){(0,y.W)("DD_LOGS",e)},initConfiguration:t},u),u}),x={},C=new _(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.handleLog.apply(a,e)},t.createDetachedTracker());return(0,s.r)({logger:C,init:(0,l.zk)(function(e){return a.init(e)}),setTrackingConsent:(0,l.zk)(function(e){o.update(e),(0,g.eG)({feature:"set-tracking-consent",tracking_consent:e})}),getGlobalContext:(0,l.zk)(function(){return r.getContext()}),setGlobalContext:(0,l.zk)(function(e){return r.setContext(e)}),setGlobalContextProperty:(0,l.zk)(function(e,t){return r.setContextProperty(e,t)}),removeGlobalContextProperty:(0,l.zk)(function(e){return r.removeContextProperty(e)}),clearGlobalContext:(0,l.zk)(function(){return r.clearContext()}),createLogger:(0,l.zk)(function(e,r){return void 0===r&&(r={}),x[e]=new _(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a.handleLog.apply(a,e)},t.createDetachedTracker(),(0,p.N)(e),r.handler,r.level,(0,p.N)(r.context)),x[e]}),getLogger:(0,l.zk)(function(e){return x[e]}),getInitConfiguration:(0,l.zk)(function(){return(0,v.I8)(a.initConfiguration)}),getInternalContext:(0,l.zk)(function(e){return a.getInternalContext(e)}),setUser:(0,l.zk)(function(e){(0,h.z)(e)&&n.setContext((0,h.I)(e))}),getUser:(0,l.zk)(function(){return n.getContext()}),setUserProperty:(0,l.zk)(function(e,t){var r,o=(0,h.I)(((r={})[e]=t,r))[e];n.setContextProperty(e,o)}),removeUserProperty:(0,l.zk)(function(e){return n.removeContextProperty(e)}),clearUser:(0,l.zk)(function(){return n.clearContext()})})}(function(e,t,r,n){var o=new es,i=[];o.subscribe(1,function(e){return(0,j.j)("logs",e)});var s=function(e){o.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,origin:k.z.AGENT,status:L.error}}),(0,g.eJ)("Error reported to customer",{"error.message":e.message})},a=(0,N.Pd)(t),u=!t.sessionStoreStrategyType||(0,R.xT)()||(0,q.Y9)()?(f="1"===B(t)?{}:void 0,{findTrackedSession:function(){return f},expireObservable:new W.y}):{findTrackedSession:function(e){var t=d.findActiveSession(e);return t&&"1"===t.trackingType?{id:t.id}:void 0},expireObservable:(d=(0,H.HX)(t,"logs",function(e){var r;return{trackingType:r="0"===e||"1"===e?e:B(t),isTracked:"1"===r}},n)).expireObservable},c=function(e,t,r,n,o){var i,s=(0,g.VL)("browser-logs-sdk",t);s.setContextProvider(function(){var e,t,r,n,i,s;return{application:{id:null===(e=V())||void 0===e?void 0:e.application_id},session:{id:null===(t=o.findTrackedSession())||void 0===t?void 0:t.id},view:{id:null===(n=null===(r=V())||void 0===r?void 0:r.view)||void 0===n?void 0:n.id},action:{id:null===(s=null===(i=V())||void 0===i?void 0:i.user_action)||void 0===s?void 0:s.id}}});var a=[];if((0,R.xT)()){var u=(0,R.Ad)(),c=s.observable.subscribe(function(e){return u.send("internal_telemetry",e)});a.push(function(){return c.unsubscribe()})}else{var f=(0,ec.W)(t,{endpoint:t.rumEndpointBuilder,encoder:(0,ef.G)()},t.replica&&{endpoint:t.replica.rumEndpointBuilder,encoder:(0,ef.G)()},r,n,o.expireObservable);a.push(function(){return f.stop()});var d=s.observable.subscribe(function(e){return f.add(e,(0,g.VG)(t))});a.push(function(){return d.unsubscribe()})}return(0,g.kx)(),(0,g.Uo)((i=(0,G.JZ)(e),(0,b.f0)({forward_errors_to_logs:e.forwardErrorsToLogs,forward_console_logs:e.forwardConsoleLogs,forward_reports:e.forwardReports,use_pci_intake:e.usePciIntake},i))),{telemetry:s,stop:function(){a.forEach(function(e){return e()})}}}(e,t,s,a,u).stop;if(i.push(function(){return c()}),function(e,t){if(!e.forwardErrorsToLogs)return S.Z;function r(r,n){var o,i,s,a,u,c,f;function d(e){var o={isAborted:n.isAborted};t.notify(0,{rawLogsEvent:{message:"".concat("xhr"===r?"XHR":"Fetch"," error ").concat(n.method," ").concat(n.url),date:n.startClocks.timeStamp,error:{stack:e||"Failed to load"},http:{method:n.method,status_code:n.status,url:n.url},status:L.error,origin:k.z.NETWORK},domainContext:o})}!e.isIntakeUrl(n.url)&&(0===n.status&&"opaque"!==n.responseType||(0,et.o)(n.status))&&("xhr"in n?d("string"==typeof(o=n.xhr).response?eo(o.response,e):o.response):n.response?(i=n.response,(s=(0,et.u)(i))&&s.body?window.TextDecoder?(a=s.body,u=e.requestErrorResponseLengthLimit,c=function(e,t){d(e?"Unable to retrieve response: ".concat(e):t)},(0,en.n)(a,function(e,t,r){if(e)c(e);else{var n=new TextDecoder().decode(t);r&&(n+="..."),c(void 0,n)}},{bytesLimit:u,collectStreamBody:!0})):s.text().then((0,l.zk)(function(t){return d(eo(t,e))}),(0,l.zk)(function(e){return d("Unable to retrieve response: ".concat(e))})):d()):n.error&&(f=n.error,d(eo((0,er.P3)((0,x._)(f)),e))))}(0,X.S)(e).subscribe(function(e){"complete"===e.state&&r("xhr",e)}),(0,ee.y)().subscribe(function(e){"resolve"===e.state&&r("fetch",e)})}(t,o),function(e,t){if(!e.forwardErrorsToLogs)return S.Z;var r=new W.y;(0,ei.Lp)(r).stop,r.subscribe(function(e){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{kind:e.type,stack:e.stack,causes:e.causes},origin:k.z.SOURCE,status:L.error}})})}(t,o),(0,Y.a)(t.forwardConsoleLogs).subscribe(function(e){o.notify(0,{rawLogsEvent:{date:(0,m.n$)(),message:e.message,origin:k.z.CONSOLE,error:e.api===P.vA.error?{stack:e.stack,fingerprint:e.fingerprint,causes:e.causes}:void 0,status:K[e.api]}})}),(0,O.v)(t,t.forwardReports).subscribe(function(e){var t,r=e.message,n=Q[e.type];n===L.error?t={kind:e.subtype,stack:e.stack}:e.stack&&(r+=" Found in ".concat((0,C.u5)(e.stack))),o.notify(0,{rawLogsEvent:{date:(0,m.n$)(),message:r,origin:k.z.REPORT,error:t,status:n}})}),p=E.concat(["custom"]),h={},p.forEach(function(e){h[e]=(0,F.K)(e,t.eventRateLimiterThreshold,s)}),o.subscribe(0,function(e){var n,i,s=e.rawLogsEvent,a=e.messageContext,c=e.savedCommonContext,f=e.domainContext,d=(0,m.ni)(s.date),l=u.findTrackedSession(d);if(l){var g=(void 0===c?void 0:c)||r(),p=(0,v.$e)({service:t.service,session_id:l.id,usr:(0,Z.Qr)(g.user)?void 0:g.user,view:g.view},g.context,V(d),s,void 0===a?void 0:a);(null===(n=t.beforeSend)||void 0===n?void 0:n.call(t,p,f))===!1||p.origin!==k.z.AGENT&&(null!==(i=h[p.status])&&void 0!==i?i:h.custom).isLimitReached()||o.notify(1,p)}}),(0,R.xT)())!function(e){var t=(0,R.Ad)();e.subscribe(1,function(e){t.send("log",e)})}(o);else{var f,d,p,h,y,w=(y=(0,ec.W)(t,{endpoint:t.logsEndpointBuilder,encoder:(0,ef.G)()},t.replica&&{endpoint:t.replica.logsEndpointBuilder,encoder:(0,ef.G)()},s,a,u.expireObservable),o.subscribe(1,function(e){y.add(e)}),y).stop;i.push(function(){return w()})}return{handleLog:function(e,t,r,n){var i=(0,v.$e)(t.getContext(),e.context);eu(e.status,T.console,t)&&function(e,t){P.LD[e.status].call(P.jG,e.message,t)}(e,i),eu(e.status,T.http,t)&&o.notify(0,{rawLogsEvent:{date:n||(0,m.n$)(),message:e.message,status:e.status,origin:k.z.LOGGER},messageContext:i,savedCommonContext:r})},getInternalContext:function(e){var t=u.findTrackedSession(e);if(t)return{session_id:t.id}},stop:function(){i.forEach(function(e){return e()})}}});(0,s.y)((0,a.R)(),"DD_LOGS",ed)}}]);